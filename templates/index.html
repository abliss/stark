<html>
<head>

<link rel="stylesheet" href="/static/css/style.css" type="text/css"/>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
<script type="text/javascript" src="/static/js/data.js"></script>

<script language="javascript" src="/static/js/lib/processing.js"></script>
<!--script language="javascript" src="/static/js/lib/init.js"></script-->

</head>
<body>
    
    <h1>Stark</h1>

<div id="left_pane">
    <canvas id="map" width="300px" height="300px"></canvas>
    <div id="input_feedback" style="display: none">Test error message</div>
    <div id="input_bar">
        <input id="command_text" type='text' /><input id="submit_command" type='submit' value='<-' />
    </div>
</div>

<div id="stark_right_pane">
    <p><span class='link' id="room_link">room</span> | <span class='link' id="profile_link"></span></p>
    
    <div id="room_box" class='right_pane_box'>
        <h2><input id="room_title_edit" type='text' value='' style='display: none';/><span id="room_title"></span></h2>
        <p id="room_desc"></p>
        <div id="room_players"></div>
        <div id="room_mobs"></div>
    </div>
    
    <div id="profile_box" class='right_pane_box' style='display: none;'>
        <div id="profile_builder" style="display: none;">
            <input type='checkbox' id="builder_checkbox" /> builder mode
        </div>
    </div>
</div>

<div style="clear: both;"></div>

<script type='text/javascript'>
$(document).ready(function(){
    // initial data
    document.map = [];
    load_map();
    document.player = null;
    get_player();

    // menu
    $("#room_link").click(function () {
        $("#room_box").show();
        $("#profile_box").hide();
    });
    $("#profile_link").click(function() {
        $("#profile_box").show();
        $("#room_box").hide();
    })
    
    // commands
    $("#command_text").focus();
    $("#submit_command").click(function () { process_command($("#command_text").val()); });
    $("#command_text").keypress(function (e) { if (e.which == 13) { process_command($(this).val()) } });

    //setInterval("reload();", 2000);

    // processing
    var script = $.ajax({url: "/static/js/rendermap.pjs", async: false}).responseText;
    var canvas = $('canvas#map').get(0);
    Processing(canvas, script);
});

</script>

</body>
</html>